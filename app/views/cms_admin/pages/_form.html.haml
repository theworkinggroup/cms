.right_column
  .form_element_group.publishing
    %h2 Publishing Options
    .form_element.checkbox
      = f.check_box :published
      = f.label :published, 'Publish?'
      
    .form_element.checkbox
      = f.check_box :excluded_from_nav
      = f.label :excluded_from_nav, 'Exclude from navigation?'

.center_column
  %h2= @cms_page.new_record? ? "New Page" : "Editing \"#{@cms_page.label}\""
  = render :partial => 'cms_admin/flash_message'
  = f.error_messages
  .form_element_group.vertical
    .form_element.text
      .label= f.label :label, 'Title'
      .field= f.text_field :label, :id => (@cms_page.new_record? ? "slugify" : nil)
    - unless CmsPage.count == 0 || @cms_page == CmsPage.root
      .form_element.text
        .label= f.label :slug, 'Slug'
        .field= f.text_field :slug, :id => 'slug'
        
  .form_element_group.vertical
    - unless CmsPage.count == 0 || @cms_page == CmsPage.root
      .form_element.select
        .label= f.label :parent_id, 'Parent Page'
        .field= f.select :parent_id, @cms_page.pages_for_select(nil, 0, true)
        
    .form_element.select
      .label= f.label :redirect_to_page_id, 'Redirect To'
      .field= f.select :redirect_to_page_id, [['---', nil]] + @cms_page.pages_for_select
      
    .form_element.select
      .label= f.label :cms_layout_id, 'Layout'
      .field= f.select :cms_layout_id, CmsLayout.options_for_select, {}, :onchange => "page_id = #{(@cms_page.try(:id) || 0)}"
  #form_blocks
    = render :partial => 'form_blocks'
  .submit
    = f.submit 'Save All Changes', :id => 'save'
    = f.submit 'Preview Page', :id => 'preview', :name => 'preview'
    or 
    = link_to 'Return to List', cms_admin_pages_path