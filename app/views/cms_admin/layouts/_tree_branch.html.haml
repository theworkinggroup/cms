%ul{:id => "layout_#{tree_branch.first.try(:parent).try(:id).to_i}_branch"}
  - tree_branch.each do |layout|
    %li
      - if layout.children.count > 0
        = link_to_remote "+", :url => {:action => 'children', :id => layout.id}, :loading => "$('layout_#{layout.id}_children').show()", :html => {:id => "layout_#{layout.id}_link", :class => 'expander'}
      .action_links
        = link_to 'Remove', cms_admin_layout_path(layout), :method => 'delete', :confirm => 'Are you sure you want to remove this layout?', :class => 'remove'
        = link_to 'Edit', edit_cms_admin_layout_path(layout), :class => 'edit'
        = link_to 'Add Child Layout', new_cms_admin_layout_path + "?parent_id=#{layout.id}", :class => 'new'
      -# .status
      -#   Status
      = link_to layout.label, edit_cms_admin_layout_path(layout), :class => 'label'
      
      .loading{:id => "layout_#{layout.id}_children", :style => 'display: none'}
        Hold your horses woman. I'm loading stuff...